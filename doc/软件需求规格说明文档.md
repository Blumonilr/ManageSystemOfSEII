灯具厂进销存系统软件需求规格说明
====



南京大学CSE工作组
-----------------

2017-09-19

更新历史
========

| **修改人员**                   | **日期**  | **变更原因**   | **版本号**  |
|--------------------------------|-----------|----------------|-------------|
| 钱宇辰、靳炳淑、王一博、吴林漾 | 2017-9-21 | 创建新文件       | V0.0   |
| 钱宇辰、靳炳淑、王一博、吴林漾 | 2017-9-25 | 用例商品分类、商品管理、库存查询、客户管理、销售管理、银行账户管理、期初建账和制定促销策略需求规格制定 | V1.0  |
| 钱宇辰、靳炳淑、王一博、吴林漾 | 2017-9-30 | 需求调整       | V2.0  |
| 吴林漾 | 2017-10-12 | 调整3.2.1，3.2.7 | V2.1  |
| 吴林漾 | 2017-10-17 | 添加3.17.1，3.18.1,3.19.1,3.21.1 | V2.2  |
|钱宇辰|2017-10-19|添加用例9、10、12、目录|V2.3|
|钱宇辰、靳炳淑、王一博、吴林漾|2018-1-12|最终修改文档|V3.0|


### 目录<br>

1.引言<br>
<menu>1.1目的<br>1.2范围<br>1.3参考文献<br>

2.总体描述<br>
<menu>2.1产品前景<br>2.2产品功能<br>2.3用户特征<br>2.4约束<br>2.5假设和依赖<br>

3.详细需求描述<br>
<menu>3.1对外接口需求<br>
3.2功能需求
<menu><menu>3.2.1 商品分类管理<br>3.2.2 商品管理<br>3.2.3库存查询<br>3.2.4 客户管理<br>3.2.5 期初建账<br>3.2.6 制定促销策略<br>3.2.7 制定销售单<br>3.2.8 银行账户管理<br>3.2.9 制定进货单<br>3.2.10 收款管理<br>3.2.11 付款管理<br>3.2.12 现金费用管理<br>3.2.13 制定进货退货单<br>3.2.14 制定销售退货单<br>3.2.15 库存盘点<br>3.2.16 库存报警设置<br>3.2.17 库存报警<br>3.2.18 库存变更提醒<br>3.2.19 查看销售明细表<br>3.2.20 查看经营历程表<br>3.2.21 查看经营情况表<br>3.2.22 审批单据<br>3.2.23库存单据制定<br>
<menu>
3.3 其他非功能需求<br>3.4 数据需求<br>3.5 其他需求<br>

1.引言
======

1.1目的
-------

本文档描述了灯具厂进销存系统的功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。

除特殊说明之外，本文档所包含的需求都是高优先级需求。

1.2范围
-------

进销存系统是为×××灯具厂开发的业务系统，开发的目标是用于帮助该灯具厂处理日常的重点业务，包括**商品分类管理、商品管理(jbs)、库存查询、客户管理(qyc)、销售管理、银行账户管理(wly)、期初建账和制定促销策略(wyb)**。

通过进销存系统的应用，期望为×××灯具厂适应新环境，提高员工工作效率和用户满意度。

1.3参考文献
-----------

1.  IEEE标准

2.  进销存系统用例文档

2.总体描述
==========

### 2.1产品前景

#### 2.1.1背景与机遇

×××灯具厂是某灯具的南京地区总代理，主要在南京负责品牌的推广及项目的落地销售、分销的批发等工作，服务对象包括项目业主、施工单位、分销商、设计院、终端用户等。现公司规模扩大，企业业务量、办公场所、员工数都发生增长，原有的系统已经不能很好的适应新的环境，且办公效率低下，对灯具厂的进一步发展产生了阻碍。除此之外，该公司还希望提高用户满意度，因此，亟需开发一套新的系统。

进销存系统就是为满足×××灯具厂新的业务发展要求而开发的，它包括一个数据集中服务器和多个客户端。数据集中服务器将所有的数据存储起来进行维护。用户通过客户端完成日常任务，客户端与数据集中服务器以实时通信的方式完成数据交换。

### 2.1.2业务需求

BR1：在系统使用6个月后，商品积压的现象要减少50%

BR2：在系统使用6个月后，财务人员工作效率要提高30%

BR3：在系统使用6个月后，销售额度要提高20%

>   最好情况：40%

>   最可能情况：20%

>   最坏情况：10%

BR4：系统上线运行后，方便总经理做决策

2.2产品功能
-----------

SF1.1：协助库存管理人员分析商品库存信息

SF1.2：协助库存管理人员处理商品入库与出库

SF1.3：自动提示销售人员使用促销策略，处理积压商品

SF2.1：协助财务人员管理银行账户

SF2.2：协助财务人员处理收入支出

SF2.3：协助财务人员管理账目变动

SF3.1：协助进货销售人员管理货物进出

SF3.2：协助进货销售人员处理销售

SF4.1：协助总经理处理单据

SF4.2：协助总经理制定促销策略

SF4.3：协助总经理掌握公司发展情况

2.3用户特征
-----------

| 库存管理人员 | 1\~2名，负责对商品分类和商品的信息的管理。能够简单使用办公信息化系统。对新系统基本持积极态度，不希望增加现有工作量。主要工作有：商品分类管理、商品管理、库存查询、库存盘点、库存报警设置、库存报警、库存变更提醒。 |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 进货销售人员 | 4\~8名，负责完成进货单和销售单。对新系统基本持积极态度，不希望增加现有工作量。主要工作有：客户管理、进货管理、进货退货管理、销售管理、销售退货管理                                                                 |
| 财务人员     | 1\~2名。使用办公信息化系统的能力较强。对新系统基本持积极态度，不希望增加现有工作量。主要工作有：银行账户管理、收款管理、付款管理、查看销售明细表、查看经营历程表、查看经营情况表、期初建账。                       |
| 总经理       | 2名。能够熟练使用办公信息化系统。对新系统基本持积极态度，主要工作有：审批单据、查看销售明细表、查看经营历程表、查看经营情况表、制定促销策略。                                                                      |

2.4约束
-------

   CON1：系统将运行在Window 10操作系统上

  CON2：系统不使用Web界面，而是图形界面

   CON3：项目要使用持续集成方法进行开发。

   CON4：在开发中，开发者要提交软件需求规格说明文档、设计描述文档和测试报告。

2.5假设和依赖
-------------

AE1：使用了赠品促销策略时系统会自动生成库存赠送单

AE2：系统里的银行账户与现实里的银行账户互不影响

3.详细需求描述
==============

### 3.1对外接口需求

#### 3.1.1用户界面

以下给出了用户界面的示意图，实际布局、风格可能有所出入

UI1
库存管理人员、进货销售人员、财务人员客户端界面
![用户界面1](http://101.37.19.32:10080/161250103/ManageSystem/raw/qyc/doc/graph/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A21.png)

UI2
总经理客户端界面
![用户界面2](http://101.37.19.32:10080/161250103/ManageSystem/raw/qyc/doc/graph/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A22.png)

UI3
商品分类管理业务界面
![](http://101.37.19.32:10080/161250103/ManageSystem/raw/qyc/doc/graph/%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2.png)

UI4
客户管理业务界面
![](http://101.37.19.32:10080/161250103/ManageSystem/raw/qyc/doc/graph/%E5%AE%A2%E6%88%B7%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2.png)

UI5
审批单据业务界面
![](http://101.37.19.32:10080/161250103/ManageSystem/raw/qyc/doc/graph/%E5%AE%A1%E6%89%B9%E5%8D%95%E6%8D%AE.png)


#### 3.1.2硬件接口
系统应该可以运行在普通PC上，信息通过鼠标键盘输入，通过显示屏输出。

#### 3.1.3软件接口
系统的运行环境为Windows操作系统
系统数据保存在txt文本文件中

#### 3.1.4通信接口
系统使用rmi通信

CI：客户端与服务器使用RMI的方式进行通信。

### 3.2功能需求

### 3.2.1 商品分类管理

#### 3.2.1.1 特性描述

当商品分类信息需要更改（增加、删除、修改）或者查询时，一个经过验证的库存管理人员进行相应的操作，系统保存商品分类信息

#### 3.2.1.2 刺激/响应序列

刺激：库存管理人员选择增加商品分类，输入分类名、父分类id

响应：若生成成功，系统显示该分类的详细信息，见Class.Show.One；若失败，则显示“新增商品分类失败！”

刺激：库存管理人员进入商品分类管理用例，或者完成一次增加、删除、修改、查询操作后

响应：系统显示商品分类列表

刺激：库存管理人员选择删除商品分类，输入商品分类的id

响应：若删除成功，系统显示“XX分类删除成功！”，否则，显示“XX分类删除失败”

刺激：库存管理人员选择修改商品分类，输入需要修改的部分信息（只能是商品分类名称）

响应：系统显示该分类的详细信息

#### 3.2.1.3 相关功能需求

|Class.Input|系统应该允许用户从键盘输入|
|---|---|
|Class.Input.Add<br>Class.Input.Delete<br>Class.Input.Modify|系统应该允许用户增加商品分类，详情见Class.Add<br>系统应该允许用户删除商品分类，详情见Class.Delete<br>系统应该允许用户修改商品分类，详情见Class.Modify|
|Class.Add.Invalid<br>Class.Add.Confirm<br>Class.Add.Cancel|若用户输入为空或者试图往子女是具体商品的节点添加新的分类时，系统应该提示“输入为空”或者“增加商品分类失败”,若用户输入与已有商品分类重复，系统应该提示“商品分类重复”<br><br>用户确定添加商品分类后，若生成成功，系统显示该分类的详细信息，见Class.Show.One；若失败，则显示“新增商品分类失败！”<br><br>用户取消添加商品分类后，系统显示商品分类列表，见Class.Show.All|
|Class.Delete.Many.Confirm<br>Class.Delete.Many.Cancel<br>Class.Delete.One.Confirm<br>Class.Delete.One.Cancel|用户确认删除某个非叶子节点时，若成功，系统应该提示“删除XX商品分类及其子类成功”，显示商品分类列表，见Class.Show.All，否则显示“XX分类删除失败”<br><br>用户取消删除某个非叶子节点时，系统应该显示商品分类列表，见Class.Show.All<br><br>用户确认删除某个叶子节点时，若成功，系统应该提示“删除XX商品分类成功”，显示商品分类列表，见Class.Show.All，否则显示“XX分类删除失败”<br><br>用户取消删除某个叶子节点时，系统应该显示商品分类列表，见Class.Show.All|
|Class.Modify.Invalid<br>Class.Modify.Confirm<br>Class.Modify.Cancel|用户输入与已有商品分类名称重复时，系统应该提示“商品分类名称重复”<br><Br>用户确认修改某个商品分类信息后，系统应该显示该分类的详细信息，见Class.Show.One<br><Br>用户取消修改商品分类信息后，系统应该显示商品分类列表，见Class.Show.All|
|Class.End.Show|用户刚进入商品分类管理功能或者完成了一次增加、删除、修改商品分类操作后，系统应该显示商品分类列表，见Class.Show.All|
|Class.Show.All<br>Class.Show.One|系统显示商品分类列表<br><Br>系统显示某个商品分类的详细信息（名称、父分类、子分类或者类下商品）|

#### 3.2.2 商品管理

#### 3.2.2.1 特性描述

在商品信息发生变化（增加、删除、修改）时，以及需要查询某种商品信息时，一个经过验证的库存管理人员可以选择商品管理功能来增加、删除、修改和查询商品信息。系统最后将更新保存信息。

优先级=高

#### 3.2.2.2刺激/响应序列

刺激：库存管理人员输入新增商品的名称、型号、进价、商品分类、数量（可选）

响应：若生成成功，系统显示该商品的详细信息，见Goods.ShowOne，若失败，则显示错误信息，见Goods.Fail

刺激：库存管理人员进入商品管理用例，或者完成一次增加、删除、修改、查询操作后

响应：系统显示商品列表

刺激：库存管理人员输入要删除的商品的id

响应：若删除成功,显示商品列表；否则显示“删除XX商品失败”

刺激：库存管理人员输入要修改的商品id，以及要修改的信息（名称、型号、进价、售价）

响应：若成功，显示该商品的详细信息

刺激：库存管理人员输入要查询的商品的关键字（id、名称、型号、分类）

响应：若找到关键字匹配的商品，则显示部分商品列表；否则显示“未找到关键字匹配的商品”

刺激：库存管理人员输入要查看的商品id

响应：系统显示商品的详细信息（id、名称、型号、进价、售价、分类、最近进价、最近售价、数量）


#### 3.2.2.3 相关功能需求

|Goods.Input|系统应该允许用户从键盘输入|
|---|
|Goods.Input.Add<br>Goods.Input.Delete<br>Goods.Input.Modify<br>Goods.Input.Search<br>Goods.Input.Show|系统应该允许用户增加商品，详情见Goods.Add<br>系统应该允许用户删除商品，详情见Goods.Delete<br>系统应该允许用户修改商品，详情见Goods.Modify<br>系统应该允许用户查看商品信息，详情见Goods.Show|
|Goods.Add.Invalid<br>Goods.Add.Confirm<br>Goods.Add.Cancel|若商品必要信息不完全（名称、型号、进价、商品分类）或者数字属性（进价、售价、数量）为负，系统显示“商品信息不合法”；若新增的商品和已有商品重复（名称、型号一样），则显示“商品重复”<br><br>用户确认添加商品后，系统应该显示新增商品的详细信息<br><br>用户取消新增商品后，系统应该显示商品列表|
|Goods.Delete.Confirm<br>Goods.Delete.Cancel|用户确认删除商品，系统显示“删除XX商品成功”，然后显示商品列表<br><Br>用户取消删除商品，系统显示商品列表|
|Goods.Modify.Invalid<br>Goods.Modify.Confirm<br>Goods.Modify.Cancel|若商品必要信息不完全（名称、型号、进价、商品分类）或者数字属性（进价、售价、数量）为负，系统显示“商品信息不合法”；若修改后的商品和已有商品重复（名称、型号一样），则显示“商品重复”<br><br>用户确认修改商品，系统显示该商品的详细信息<br><Br>用户取消修改商品，系统显示商品列表|
|Goods.Search.Confirm<br>Goods.Search.Cancel|用户确认查找商品，若找到，则显示关键字匹配的商品列表；否则显示“关键字匹配的商品不存在”<br><br>用户取消查找商品，系统显示商品列表|
|Goods.Show.One<br>Goods.Show.All<br>Goods.Show.Part|系统显示商品详细信息（id、名称、型号、进价、售价、分类、最近进价、最近售价、数量）<br><br>系统显示商品列表<br><br>系统显示部分商品列表|


#### 3.2.3库存查询

#### 3.2.3.1特性描述

当需要查看某段时间内的所欲库存变动情况时，一个经过验证的库存管理人员选择选择相应的时间区间，系统显示所选区间的所有库存变动信息，库存管理人员选择性的查看一些单据的具体信息。

优先级=高

#### 3.2.3.2刺激/响应序列

刺激：库存管理人员输入起始时间、结束时间

响应：系统显示该段时间内所有出入库操作的信息（出入库原因、数量、对应单据编号）



#### 相关功能需求

|Stock.Input|系统应该允许用户从键盘输入|
|---|
|Stock.Input.Check|系统应该允许用户查看库存记录，详情见Stock.Check|
|Stock.Check.Invalid<br>Stock.Check.Show<br>Stock.Check.ViewReceipt|若起始时间在结束时间之后或者时间格式不正确（yyyy-mm-dd），显示“输入不正确”<br><br>时间段正确，系统应该显示该时间段内的所有库存变动信息（出入库原因、数量、对应单据编号）<br><br>用户输入某个库存变动记录对应的单据编号，系统显示该单据的详细信息|

#### 3.2.4 客户管理

#### 3.2.4.1 特性描述

当客户信息需要更新（增加、删除、修改）或者需要查询客户时，一个经过验证的进货销售人员可以增加新客户，删除客户，修改客户属性或者查询客户。

优先级=高

#### 3.2.4.2 刺激/响应序列

刺激：进货销售人员输入新增客户的信息（分类、级别、姓名、电话、地址、邮编、电子邮箱、默认业务员）

响应：若新增成功，系统显示新增客户的信息；若客户必要信息（姓名、电话、分类）不完全，则显示“客户信息不完全”；若客户重复（姓名、电话、分类），则显示“客户已经存在”

刺激：进货销售人员输入要删除的客户id

响应：删除成功，显示“XX客户删除成功”

刺激：进货销售员输入要修改的客户的id以及要修改的信息（电话、地址、分类、级别、邮箱、邮编）

响应：若修改成功，显示客户的信息；若客户必要信息（姓名、电话、分类）不完全，则显示“客户信息不完全”；若客户重复（姓名、电话、分类），则显示“客户已经存在”

刺激：进货销售员输入要查询的客户的属性（分类、级别、姓名、电话、地址、邮编、电子邮箱、默认业务员）

响应：若查找成功，显示条件匹配的客户列表；否则显示“客户不存在”

刺激：用户进入客户管理界面或完成一次增删改查操作

响应：系统显示客户列表

刺激：用户选择某一具体客户

响应：系统显示该客户详细信息（分类、级别、姓名、电话、地址、邮编、电子邮箱、默认业务员、应收、应付、最大应付、最大应收）

#### 相关功能需求

|Customer.Input|系统应该允许客户管理人员从键盘输入|
|---|
|Customer.Input.Add<br>Customer.Input.Delete<br>Customer.Input.Modify<br>Customer.Input.Search<br>Customer.Input.Show|系统应该允许客户管理人员新增客户，详情见Customer.Add<br><br>系统应该允许客户管理人员删除客户，详情见Customer.Delete<br><br>系统应该允许客户管理人员修改客户，详情见Customer.Modify<br><br>系统应该允许客户管理人员查找客户，详情见Customer.Search<br><br>系统应该可以显示客户信息，详情见Customer.Show|
|Customer.Add.Invalid<br>Customer.Add.Confirm<br>Customer.Add.Cancel|若客户必要信息（姓名、电话、分类）不完全，则显示“客户信息不完全”；若客户重复（姓名、电话、分类），则显示“客户已经存在”<br><br>用户确认新增客户，显示新增客户的详细信息<br><Br>用户取消新增客户，显示客户列表|
|Customer.Delete.Confirm<br>Customer.Delete.Cancel|用户确认删除客户，系统显示“删除成功”<br><br>用户取消删除客户，系统显示客户列表|
|Customer.Modify.Invalid<br>Customer.Modify.Confirm<br>Customer.Modify.Cancel|若客户必要信息（姓名、电话、分类）不完全，则显示“客户信息不完全”；若客户重复（姓名、电话、分类），则显示“客户已经存在”<br><br>用户确认修改客户信息，系统显示修改后客户的详细信息<br><Br>用户取消修改客户信息，系统显示客户列表|
|Customer.Search.Confirm<br>Customer.Search.Cancel|用户确认查找客户，若找到，显示信息吻合的客户列表；否则显示“客户不存在”<br><br>用户取消查找客户，系统显示客户列表|
|Customer.Show.All<br>Customer.Show.One|用户进入客户管理用例或者完成一次增删改查操作后，系统显示客户列表<br><br>用户选择某一具体客户，系统显示该客户详细信息（分类、级别、姓名、电话、地址、邮编、电子邮箱、默认业务员、应收、应付、最大应付、最大应收）|

### 3.2.5 期初建账

#### 3.2.5.1 特性描述

期初建账，即一套帐的初始化操作。一个经过验证的财务人员开始建账，添加商品信息（商品分类，某一商品的名称，类别，型号，进价/售价(默认为上年平均)，最近进价和最近售价留空），客户信息（客户分类，某一个客户的名称，联系方式等，应收应付(之前遗留)），银行账户信息（名称，余额）。期初的信息一旦建立完毕就会单独存储起来，同时将此信息作为系统的启动初始状态，之后的一切操作将会改变系统里的信息，但不会改变期初信息。期初信息随时可查。系统支持建多套账。

优先级=高

#### 3.2.5.2 刺激/响应序列

刺激：财务人员输入新建账目的信息（商品信息（商品分类、商品名称、类别、型号、进价/售价、最近进价、最近售价）、客户信息（客户分类、客户名称、联系方式、应收应付）、银行账户信息（名称、余额））

响应：系统显示新增账目的详细信息

刺激：财务人员输入时间查询账目信息

响应：若找到，系统显示账目详细信息；否则显示“账目不存在”


#### 3.2.5.3 相关功能需求

|Book.Input|系统应该允许用户从键盘输入|
|---|
|Book.Input.Add<br>Book.Input.Search<br>Book.Input.Show|系统应该允许用户新建账目或者从草稿箱中恢复建账，详情见Book.Add<br><Br>系统应该允许用户查看往期账目，详情见Book.Search<br><br>系统应该可以显示账目信息，详情见Book.Show|
|Book.Add.Invalid<br>Book.Add.Confirm<br>Book.Add.Cancel<br>Book.Add.Stage|若账目信息不完全（商品信息、客户信息、银行账户信息），显示“账目信息不完全”<br><Br>用户确认新建账目，系统显示新建账目的信息<br><Br>用户取消建账，系统显示账目列表<br><br>用户未暂存账目，系统显示草稿箱列表|
|Book.Search.Confirm<br>Book.Search.Cancel|用户确认查询账目，系统显示条件吻合的账目信息<br><br>用户取消查询账目，系统显示账目列表|
|Book.Show.All<br>Book.Show.One|用户进入期初建账用例或者完成一次建账、查询账目的操作后，系统应该显示账目列表<bR><br>用户输入某个账目id，系统显示该账目的详细信息|

### 3.2.6 制定促销策略

#### 3.2.6.1 特性描述

1.  总经理可以针对不同级别的用户制定促销策略（赠品、价格折让、 赠送代金劵）。

2.  总经理可以制定特价包（组合商品降价）。

3.  总经理可以制定针对不同总价的促销策略（赠品、赠送代金卷）。

所有促销策略都有起始时间和间隔时间。  
所有赠品条件促发后，系统会自动建立库存赠送单，由总经理审批通过后，发送消息给库存管理员发放赠品。

#### 3.2.6.2 刺激/响应序列

刺激：总经理输入新增促销策略的内容（名称、赠品列表、价格折让、代金券金额、起始时间、结束时间）

响应：系统显示该策略的详细信息

刺激：总经理进入制定促销策略用例或者完成一次新增促销策略的操作

响应：系统显示促销策略列表

刺激：总经理输入要删除的策略的id

响应：系统显示“XX策略删除成功”

#### 3.2.6.3 相关功能需求

|Strategy.Input|系统应该允许用户从键盘输入|
|---|
|Strategy.Input.Add<br>Strategy.Input.Show<br>Strategy.Input.Delete|系统应该允许总经理制定新的促销策略，详情见Strategy.Add<br><br>系统应该运行总经理查看现有的促销策略，详情见Strategy.Show<br><br>系统应该允许总经理删除促销策略，详情见Strategy.Delete|
|Strategy.Add.Invalid<br>Strategy.Add.Confirm<br>Strategy.Add.Cancel|若促销策略重复（名称相同），显示“促销策略重复”；若折扣或者代金券金额非正或者起始时间在结束时间之后，则显示“数据格式不正确”<br><Br>用户确认新增促销策略，系统显示新增策略的信息<br><Br>用户取消新增策略，系统显示促销策略列表|
|Strategy.Show.All<br>|用户进入制定促销策略用例或者完成一次新增删除操作后，系统显示促销策略列表<br>|
|Strategy.Delete.Confirm<br>Strategy.Delete.Cancel|用户确认删除促销策略，系统应该显示删除后的促销策略列表<br><br>用户取消删除策略，显示策略列表|

#### 3.2.7 制定销售单

#### 3.2.7.1特性描述

生成销售单，记录销售出货信息。

优先级=高

#### 3.2.7.2刺激/响应序列

刺激：进货销售员选择新建一个销售单

响应：系统显示商品选择界面

刺激：进货销售员选择销售的商品名称

响应：系统读取商品信息中的进价作为商品单价并在销售单上记录商品

刺激：进货销售员输入商品数量

响应：系统在销售单上记录商品数量

刺激：进货销售员选择使用代金券金额

响应：系统计算总价在销售单上记录总价和代金券金额

刺激：进货销售员根据现有信息进行搜索

响应：系统返回可用的促销策略

刺激：进货销售员选择促销策略并使用

响应：系统识别促销策略类型并根据内容进行计算和价格修改

刺激：进货销售员手动输入商品备注

响应：系统在销售单上记录备注

刺激：进货销售员确认生成销售单

响应：系统保存并生成销售单，等待审批

刺激：进货销售员根据库存赠送单更改销售单信息

响应：系统更新并保存最新信息

刺激：进货销售员取消信息输入

响应：系统关闭此销售单，返回选择界面

#### 3.2.7.3相关功能需求

| SaleReceipt.Input          | 系统应该允许进货销售员在销售管理中进行键盘输入                                       |
|----------------------------------|--------------------------------------------------------------------------------------|
| SaleReceipt.Input.Goods       | 系统应允许进货销售员对商品信息进行操作，参见SaleReceipt.Goods             |
| SaleReceipt.Input.Cancel      | 系统应允许进货销售员取消当前操作，返回选择界面                           |
| SaleReceipt.Input.End         | 系统应允许进货销售员进行结束销售单建立操作，参见SaleReceipt.End     |
| SaleReceipt.Input.Gift        | 系统应允许进货销售员使用代金券，参见SaleReceipt.Gift        |
| SaleReceipt.Input.Strategy        | 系统应允许进货销售员使用代金券，参见SaleReceipt.Strategy        |
| SaleReceipt.Goods.Start       | 在新建销售单最开始时系统要允许进货销售员进行输入                                     |
| SaleReceipt.Goods.Cancle      | 在进货销售员取消信息输入时，系统关闭此销售单，返回选择界面                           |
| SaleReceipt.Goods.Num         | 在进货销售员输入数量后，系统记录商品数量                                             |
| SaleReceipt.Goods.Remark      | 在进货销售员输入商品备注后，系统记录商品备注                                         |
| SaleReceipt.Goods.Price       | 在进货销售员选择商品之后，系统自动以进价为商品价格并记录                             |
| SaleReceipt.Goods.Name        | 在进货销售员选择商品之后，系统记录商品名称                                           |
| SaleReceipt.Goods.Invalid     | 商品数量或单价超出99999或者数量输入为负数或者小数、单价输入为负数时，系统提示错误并要求重新输入             |
| SaleReceipt.Gift.Price        | 在进货销售员选择代金券金额时，系统记录代金券金额并计算总价                           |
| SaleReceipt.Gift.Invalid      | 折让金额超出进货销售员的权限时，系统提示错误并要求重新选择代金券金额                 |
| SaleReceipt.Strategy.Search | 进货销售员根据现有信息进行搜索，系统返回可用的促销策略 |
| SaleReceipt.Strategy.use | 进货销售员选择促销策略后，系统识别促销策略类型并根据内容进行计算和价格修改 |
| SaleReceipt.End.Goods         | 在进货销售员输入一系列商品之后确认生成销售单时，系统要处理结束输入并保存和生成销售单 |
| SaleReceipt.End.Total         | 新生成销售单时，系统计算总价并记录                                                   |
| SaleReceipt.End.WaitToExamine | 系统新生成的单据进入审批状态                                                         |
| SaleReceipt.StockGiving       | 在进货销售员收到库存赠送单更改销售单信息时，系统更新并保存最新信息                   |
| SaleReceipt.NotStart    | 在当天新建销售单超过99999条时，系统提示错误并拒绝新建销售单                          |

#### 3.2.8 银行账户管理

#### 3.2.8.1 特性描述

管理公司的银行账户，包括查询信息，增加、删除、修改账户。

优先级=高

#### 3.2.8.2刺激/响应序列

刺激：财务人员输入银行账号和密码

响应：系统检测账号和密码后显示该账户的名称和余额

刺激：财务人员选择新增银行账户并输入新账号和密码

响应：系统记录账号和密码并生成新的账户

刺激：财务人员选择删除银行账户并输入该账户账号和密码

响应：系统找到该账户并发出确认信息

刺激：财务人员选择确认删除账户

响应：系统删除确认账户的信息

刺激：财务人员选择修改银行账户属性并输入该账户账号和密码

响应：系统进入该账户

刺激：财务人员在修改银行账户信息时输入修改后的信息

响应：系统确认修改后的信息并保存

刺激：收银员取消增加/删除/修改账户任务

响应：系统关闭任务并返回初始界面

刺激：财务人员选择查询银行账户并输入关键字

响应：系统显示关键字匹配的所有账户的简要信息

刺激：财务人员选择具体账户

响应：系统显示账户属性

#### 3.2.8.3相关功能需求

| BankAccountManagement.Input| 系统应允许财务人员在系统中输入信息 |
|--------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------|
| BankAccountManagement.Input.Login | 系统应允许财务人员进行账户登录操作，详情见BankAccountManagement.Login |
| BankAccountManagement.Input.Add                          | 系统应允许财务人员进行增加账户操作，参见BankAccountManagement.Add   |
| BankAccountManagement.Input.Delete                       | 系统应允许财务人员进行删除账户操作，参见BankAccountManagement.Delete  |
| BankAccountManagement.Input.Revise                       | 系统应允许财务人员进行修改账户操作，参见BankAccountManagement.Revise  |
| BankAccountManagement.Input.Inquire                      | 系统应允许财务人员进行查询账户操作，参见BankAccountManagement.Inquire |
| BankAccountManagement.Cancle                                 | 在财务人员取消增加/删除/修改账户任务时，系统关闭任务并返回初始界面                                                          |
| BankAccountManagement.Login.Valid                            | 在财务人员输入账户账号和密码后，系统显示账户名称和余额                                                                    |
| BankAccountManagement.Login.Invalid.NoAuthority              | 财务人员权限不足，系统警告并拒绝进一步操作                                                                                |
| BankAccountManagement.Login.Invalid.WrongNameOrPassword      | 账号或密码不正确，系统提示错误信息并要求重新输入                                                                          |
| BankAccountManagement.Login.Invalid.TooManyIlligelOperation  | 账号或密码多次不正确，系统给予警告并要求重新输入                                                                          |
| BankAccountManagement.Add.Succese                            | 在财务人员输入新账号和密码后，系统检测无重复并记录该账户                                                                  |
| BankAccountManagement.Add.Repeat                             | 新建账户与已有账户重复时，系统提示错误并要求重新操作                                                                      |
| BankAccountManagement.Delete.Confirm                         | 在财务人员输入账户名和密码时，系统提示是否确认操作                                                                        |
| BankAccountManagement.Delete.Succese                         | 在财务人员确认删除操作时，系统删除该账户的信息                                                                            |
| BankAccountManagement.Delete.Invalid.WrongNameOrPassword     | 账号或密码不正确，系统提示错误信息并要求重新输入                                                                          |
| BankAccountManagement.Delete.Invalid.TooManyIlligelOperation | 账号或密码多次不正确，系统给予警告并要求重新输入                                                                          |
| BankAccountManagement.Revise.LoginSuccese                    | 在财务人员登录账户后，系统显示账户相关属性                                                                                |
| BankAccountManagement.Revise.ReviseInformation               | 在财务人员修改相关属性后，系统保存修改                                                                                    |
| BankAccountManagement.Revise.Invalid.WrongNameOrPassword     | 账号或密码不正确，系统提示错误信息并要求重新输入                                                                          |
| BankAccountManagement.Revise.Invalid.TooManyIlligelOperation | 账号或密码多次不正确，系统给予警告并要求重新输入                                                                          |
| BankAccountManagement.Revise.ReviseBalance                   | 在财务人员企图修改账户余额时，系统提示错误并拒绝操作                                                                      |
| BankAccountManagement.Inquire.KeyWordSearching               | 在财务人员输入关键字后，系统显示关键字匹配的所有账户的简要信息                                                            |
| BankAccountManagement.Inquire.Choose                         | 在财务人员选择具体账户时，系统显示账户属性                                                                                |


#### 3.2.9 制定进货单

#### 3.2.9.1 特性描述

有新的进货需求时，进货销售人员制定进货单，等待经理审批

优先级=高

#### 3.2.9.2 刺激/响应序列

刺激：进货销售员开始制定进货单业务

响应：系统显示进货单界面

刺激：进货销售员从系统显示的商品选择界面中选择商品名称

响应：系统读取商品信息，把进价作为默认单价

刺激：进货销售员输入商品数量、商品单价、备注

响应：系统检测商品数量、商品单价是否是正整数，若不是，则显示“数据格式不正确！”

刺激：进货销售员生成进货单

响应：系统保存并生成进货单，显示详细信息，等待审批；若当天新建进货单超过99999条，系统则显示“当天生成进货单过多！”，取消并结束本次制定进货单操作

刺激：进货销售员取消制定进货单

响应：系统不做任何保存，退出本次制定进货单业务

刺激：进货销售员选择导出进货信息

响应：系统以excel形式导出所有进货信息

#### 3.2.9.2 相关功能需求

|PurchaseList.Input|系统应允许进货销售员进行输入|
|---|---|
|PurchaseList.Input.New|系统应允许进货销售员进行新建进货单，参见PurchaseList.New|
|PurchaseList.New.Infoinput|当进货销售员输入商品数量、商品单价、备注时，系统检测商品数量、商品单价是否是正整数，若不是，则显示“数据格式不正确！”|
|PurchaseList.New.Confirm|当进货销售员确认生成进货单时，系统要保存并生成进货单，显示其详细信息，若当天生成进货单数量超过99999，系统应显示“当天生成进货单数量过多！”，取消并结束本次制定进货单操作|
|PurchaseList.New.Cancel|当进货销售员取消制定进货单时，系统不做任何保存，退出本次制定进货单业务|
|PurchaseList.Goods|当进货销售员选择商品名称时，系统应该显示商品选择界面，显示商品列表|
|PurchaseList.Export|当进货销售员选择导出进货信息时，系统以excel形式导出所有进货信息|


### 3.2.10 收款管理

#### 3.2.10.1 特性描述
财务人员新建一个收款单，包含以下信息：单据编号，客户（同时包含供应商和销售商），操作员，转账列表，总额汇总。转账列表中的一项包含：银行账户，转账金额，备注。收款单通过审批后，会更改客户的应付数据。

#### 3.2.10.2 刺激/响应序列  
刺激：财务人员新建收款单  
响应：系统显示输入界面  
刺激：财务人员填写相关信息，选择确定  
响应：系统检查单据内容并生成收款单等待审批  
刺激：审批通过  
响应：系统更该客户的应付数据  
刺激：新建收款单超过99999条  
响应：系统提示错误并拒绝操作  
刺激：财务人员选择取消  
响应：系统取消收款单创建  
刺激：财务人员确认命令时单据信息缺失   
响应：系统要求输入缺失信息   
刺激：单据审批通过  
响应：系统更改客户的应付数据，增加账户余额   

#### 3.2.10.3 相关功能需求
|Collection.input|系统允许财务人员在新建收款单时使用键盘输入|
|---|
|Collection.Input.start|系统应允许财务人员创建收款单，参见Collection.start|
|Collection.Input.check|财务人员输入确认命令后，系统对输入内容进行检查,参见Collection.check|
|Collection.Input.end|通过审批后系统对数据进行修改,参见Collection.end|
|Collection.start.refuse|当天新建收款单超过99999条，系统提示错误并拒绝操作|
|Collection.start.restart|单据没有通过审批，系统要求财务人员重新输入信息|
|Collection.confirm|财务人员输入确认命令，创建收款单过程结束|
|Collection.cancel|财务人员输入取消命令，系统关闭创建收款单窗口，不做任何操作|
|Collection.check.create|财务人员确认输入命令后，输入内容通过检查，系统生成待审批状态的收款单|
|Collection.check.error|财务人员确认输入命令时单据信息缺失，系统提示补全信息|
|Collection.end.client|审批通过后，系统更改客户的应付数据|
|Collection.end.bankaccount|审批通过后，系统更改相应账户余额|
|Collection.end.remind|审批通过后，系统提示销售人员单据审批通过|

### 3.2.11 付款管理

#### 3.2.11.1 特性描述

制定现金费用单，单据中包含：单据编号，客户（同时包含供应商和销售商），操作员，转账列表，总额汇总。转账列表中的一项包含：银行账户，转账金额，备注。入账后将会减少该账户的余额。付款单通过审批后，会更改客户的应收数据。

#### 3.2.11.2 刺激/响应序列

刺激：财务人员新建付款单  
响应：系统显示输入界面  
刺激：财务人员填写相关信息，选择确定  
响应：系统检查单据内容并生成付款单等待审批  
刺激：审批通过  
响应：系统更该客户的应收数据  
刺激：新建付款单超过99999条  
响应：系统提示错误并拒绝操作  
刺激：财务人员选择取消  
响应：系统取消付款单创建  
刺激：单据信息缺失   
响应：系统要求输入缺失信息   
刺激：单据审批通过  
响应：系统更改客户的应收数据，减少账户余额   
刺激：付款金额大于银行账户余额
响应：系统提示余额不足并退出付款单创建界面

#### 3.2.11.3 相关功能需求

|payment.input|系统允许财务人员在新建付款单时使用键盘输入|
|---|
|payment.input.start|系统应允许财务人员创建付款单，参见payment.start|
|payment.Input.check|财务人员输入确认命令后，系统对输入内容进行检查,参见payment.check|
|payment.Input.end|通过审批后系统对数据进行修改,参见payment.end|
|payment.start.refuse|当天新建付款单超过99999条，系统提示错误并拒绝操作|
|payment.start.restart|单据没有通过审批，系统要求财务人员重新输入信息|
|payment.confirm|财务人员输入确认命令，创建付款单过程结束|
|payment.cancel|财务人员输入取消命令，系统关闭创建付款单窗口，不做任何操作|
|payment.check.create|输入内容通过检查，系统生成待审批状态的付款单|
|payment.check.error|单据信息缺失，系统提示补全信息|
|payment.check.refuse|付款金额大于银行账户余额，系统提示余额不足并退出|
|payment.end.client|审批通过后，系统更改客户的应收数据|
|payment.end.bankaccount|审批通过后，系统更改相应账户余额|
|payment.end.remind|审批通过后，系统提示销售人员单据审批通过|

### 3.2.12 现金费用管理

#### 3.2.12.1 特性描述
制定现金费用单（管理报销等现金操作）。单据中包含：单据编号（XJFYD-yyyyMMdd-xxxxx）,操作员（当前登录用户，银行账户，条目清单，总额。条目清单中包括：条目名，金额，备注。入账后将会减少该账户的余额。

#### 3.2.12.2 刺激响应序列

刺激：财务人员新建现金费用单  
响应：系统显示输入界面  
刺激：财务人员填写相关信息，选择确定  
响应：系统检查单据内容并生成现金费用单等待审批  
刺激：审批通过  
响应：系统更该客户的应收数据  
刺激：新建现金费用单超过99999条  
响应：系统提示错误并拒绝操作  
刺激：财务人员选择取消  
响应：系统取消现金费用单创建  
刺激：单据信息缺失   
响应：系统要求输入缺失信息   
刺激：单据审批通过  
响应：减少账户余额   
刺激：现金费用金额大于银行账户余额  
响应：系统提示余额不足并退出现金费用单创建界面  

#### 3.2.12.3 相关功能需求
|cash.input|系统允许财务人员在新建现金费用单时使用键盘输入|
|---|
|cash.input.start|系统应允许财务人员创建现金费用单，参见cash.start|
|cash.Input.check|财务人员输入确认命令后，系统对输入内容进行检查,参见cash.check|
|cash.Input.end|通过审批后系统对数据进行修改,参见cash.end|
|cash.start.refuse|当天新建现金费用单超过99999条，系统提示错误并拒绝操作|
|cash.start.restart|单据没有通过审批，系统要求财务人员重新输入信息|
|cash.confirm|财务人员输入确认命令，创建现金费用单过程结束|
|cash.cancel|财务人员输入取消命令，系统关闭创建现金费用单窗口，不做任何操作|
|cash.check.create|输入内容通过检查，系统生成待审批状态的现金费用单|
|cash.check.error|单据信息缺失，系统提示补全信息|
|cash.check.refuse|付款金额大于银行账户余额，系统提示余额不足并退出|
|cash.end.bankaccount|审批通过后，系统更改相应账户余额|
|cash.end.remind|审批通过后，系统提示销售人员单据审批通过|

#### 3.2.13 制定进货退货单

#### 3.2.13.1 特性描述

进货商品不符合要求时，进货销售人员制定进货退货单，等待经理审批

优先级=中

#### 3.2.13.2 刺激/响应序列

刺激：进货销售员开始制定进货退货单业务

响应：系统显示进货退货单界面

刺激：进货销售员从系统显示的商品选择界面中选择商品名称

响应：系统读取商品信息，把进价作为默认单价

刺激：进货销售员输入商品数量、商品单价、备注

响应：系统检测商品数量、商品单价是否是正整数，若不是，则显示“数据格式不正确！”

刺激：进货销售员生成进货退货单

响应：系统保存并生成进货退货单，显示详细信息，等待审批；若当天新建进货退货单超过99999条，系统则显示“当天生成进货退货单过多！”，取消并结束本次制定进货退货单操作

刺激：进货销售员取消制定进货退货单

响应：系统不做任何保存，退出本次制定进货退货单业务

刺激：进货销售员选择导出进货退货信息

响应：系统以excel形式导出所有进货退货信息

#### 3.2.13.3 相关功能需求

|PurchaseReturnList.New|系统应该允许进货销售员制定进货退货单，若当天新建进货退货单超过99999条，系统则显示“当天生成进货退货单过多！”，取消并结束本次制定进货退货单操作|
|---|---|
|PurchaseReturnList.Goods|当进货销售员选择商品名称时，系统应该显示商品选择界面，显示商品列表|
|PurchaseReturnList.Input|当进货销售员输入商品数量、价格时，系统应该检测数据格式是否正确，系统还应允许进货销售员输入备注|
|PurchaseReturnList.New.Confirm|当进货销售员确认生成进货退货单时，系统要保存并生成进货退货单，显示其详细信息，若当天生成进货退货单数量超过99999，系统应显示“当天生成进货退货单数量过多！”，取消并结束本次制定进货退货单操作|
|PurchaseReturnList.New.Cancel|当进货销售员取消制定进货退货单时，系统不做任何保存，退出本次制定进货退货单业务|
|PurchaseReturnList.Export|当进货销售员选择导出进货退货信息时，系统以excel形式导出所有进货退货信息|

#### 3.2.14 制定销售退货单

#### 3.2.14.1特性描述

生成销售退货单，记录销售退货信息。

优先级=中

#### 3.2.14.2 刺激/响应序列

刺激：进货销售员选择新建一个销售退货单

响应：系统显示商品选择界面

刺激：进货销售员选择销售退货的商品名称

响应：系统读取商品信息中的进价作为商品单价并在销售退货单上记录商品

刺激：进货销售员输入商品数量

响应：系统在销售退货单上记录商品数量；若输入为负数、小数或其他字符，提示“数据格式不正确！”并要求重新输入

刺激：进货销售员选择使用代金券金额

响应：系统计算总价在销售退货单上记录总价和代金券金额；若折让金额超过进货销售员的权限，提示“折让金额超出权限！”并要求重新选择代金券金额

刺激：进货销售员手动输入商品备注

响应：系统在销售退货单上记录备注

刺激：进货销售员确认生成销售退货单

响应：系统保存并生成销售退货单，等待审批；若当天生成销售退货单超过99999条，提示“当天生成销售退货单超过99999条！”并拒结束此次业务

刺激：进货销售员取消信息输入

响应：系统关闭此销售退货单，返回选择界面

#### 3.2.14.3 相关功能需求

|SaleReturnList.New|系统应该允许进货销售员制定销售退货单|
|---|---|
|SaleReturnList.Goods|当进货销售员选择销售退货的商品时，系统应该显示商品选择界面以供选择|
|SaleReturnList.Input|当进货销售员输入商品数量、价格时，系统应该检测数据格式是否正确，系统还应允许进货销售员输入备注|
|SaleReturnList.Gift|当进货销售员输入使用的代金券金额时，系统应该计算总价在销售退货单上记录总价和代金券金额；若折让金额超过进货销售员的权限，提示“折让金额超出权限！”并要求重新选择代金券金额|
|SaleReturnList.New.Cancel|当进货销售员取消制定销售退货单时，系统不做任何保存，退出本次制定进货退货单业务|
|SaleReturnList.New.confirm|当进货销售员确认生成销售退货单时，系统要保存并生成进货退货单，显示其详细信息，若当天新建销售退货单超过99999条，系统则显示“当天生成销售退货单过多！”，取消并结束本次制定销售退货单操作|
|SaleReturnList.Export|当进货销售员选择导出销售退货信息时，系统以excel形式导出所有销售退货信息|


#### 3.2.15 库存盘点

#### 3.2.15.1特性描述
生成一个库存快照，包括当天的各种商品的名称，型号，库存数量，库存均价，批次，批号，出厂日期。可以导出excel表格。

优先级=中

#### 3.2.15.2刺激/响应序列
刺激：库存管理人员选择库存盘点功能

响应：系统筛选库存信息，显示库存管理界面，显示目前库存数量，以及当天的各种商品的名称，型号，库存数量，库存均价，批次，批号，出厂日期。

刺激：库存管理人员选择“导出excel表格”  

响应:系统询问文件保存路径

刺激：库存管理人员选择好路径并确认（有默认路径）

响应：系统生成excel表格，存放在相应目录下，文件名称为当前时间。

刺激：库存管理人员选择推出该界面


#### 3.2.15.3 相关功能需求
|Stock.Inventory|系统应该允许库存管理人员盘点库存|
|-----|-----|
|Stock.Inventory.show|系统能够展示该功能所需的信息|
|Stock.Inventory.url|系统应该允许库存管理人员选择表格导出的地址|
|Stock.Inventory.Form|系统能够生成excel表格并保存在相应目录下|
|Stock.Inventory.Cancle|系统能够退出该界面|


#### 3.2.16 库存报警设置

#### 3.2.16.1特性描述
库存管理人员可以为某种商品设置一个库存警戒值，当库存数量小于设置好的警戒值时，系统向库存管理人员发送库存报警（参考库存报警用例）。

优先级=高

#### 3.2.16.2刺激/响应序列
刺激：库存管理人员选择“库存报警”功能

响应：系统显示商品名称/编号输入框

刺激：库存管理人员输入名称或编号并确认

响应：系统查找该商品，显示商品的详细信息

刺激：输入的名称或编号不存在对应商品

响应：系统提示“未找到该商品”

刺激：库存管理人员放弃报警设置

响应：系统保存信息，退出该界面

刺激：库存管理人员确定设置查找到的商品的报警信息

响应：系统显示报警数量输入窗口

刺激：该商品已有报警

响应：系统询问“该商品已有报警信息，是否修改”

刺激：库存管理人员选择“不修改”

响应：系统退出报警设置界面返回商品查找界面

刺激：库存管理人员选择“修改”

响应：系统显示报警数量输入窗口

刺激：库存管理人员输入报警数量并确认

响应：系统更新保存信息

刺激：输入的报警数量小于0

响应：系统提示“报警数量设置需要大于0！”并返回数量输入界面

刺激：库存管理人员选择“报警修改/移除”

响应：系统查找信息，显示报警商品表

刺激：库存管理人员选择修改某商品的报警信息

响应：系统显示报警数量输入窗口

刺激：库存管理人员选择移除某商品的报警信息

响应：系统更新数据保存

#### 3.2.16.3 相关功能需求
|Stock.SetAlarm|系统应该允许库存管理人员为商品设置警戒值|
|------|----------|
|Stock.SetAlarm.Looking|系统应该允许库存管理人员查找商品|
|Stock.SetAlarm.Looking.NotFound|未找到商品，系统提示商品不存在|
|Stock.SetAlarm.Show|系统可以显示查找到的商品的详细信息|
|Stock.SetAlarm.Input|系统应该允许库存管理人员输入报警数量|
|Stock.SetAlarm.Invalid|输入数量小于0，系统提示“数量需要大于0”|
|Stock.SetAlarm.Duplicate|商品已经有报警设置时，系统询问是否修改|
|Stock.SetAlarm.Duplicate.Yes|库存管理人员确定修改，系统显示报警数量输入框|
|Stock.SetAlarm.Cancle|库存管理人员取消设置，系统应该退出该界面|
|Stock.SetAlarm.Modify&Delete|库存管理人员选择修改移除报警信息，系统显示报警商品单|
|Stock.SetAlarm.Modify&Delete.Modify|库存管理人员选择一个商品，系统显示数量输入窗口|
|Stock.SetAlarm.Modify&Delete.Delete|库存管理人员选择移除一个商品的报警信息，系统删除该信息，更新/保存|



#### 3.2.17 库存报警

#### 3.2.17.1特性描述
对于已经设置报警信息的商品，当库存数量小于报警值时，系统向库存管理人员发送库存报警信息。

优先级=中

#### 3.2.17.2刺激/响应序列
刺激：某种已经设置报警数量的商品的库存数量减小

响应：系统检查是否小于警戒值，若小于，发送报警信息

#### 3.2.17.3 相关功能需求
|Stock.Alarm|系统能够向库存管理人员发送库存报警信息|
|---|
|Stock.Alarm.Check|当库存数量改变时，系统要检查是否小于警戒值|

#### 3.2.18 库存变更提醒

#### 3.2.18.1特性描述
系统中任何单通过审批库存数量被改变时，仓库管理人员会收到一个消息,仓库管理人员会根据该消息完成现实中商品的进出货。

优先级=中

#### 3.2.18.2刺激/响应序列

刺激：单据审批通过，库存数量被系统自动修改

响应：系统向库存管理人员发送库存变更提醒

#### 3.2.18.3 相关功能需求

|Stock.ChangeInform|系统能够在库存数量发生改变时提醒库存管理人员|
|--|--||



#### 3.2.19 查看销售明细表

#### 3.2.19.1 特性描述

查看一段时间内的销售记录。

优先级=低

#### 3.2.19.2 刺激/响应序列

刺激：财务人员或总经理选择查看销售明细表

响应：系统显示筛选条件

刺激：财务人员或总经理输入筛选条件

响应：系统以列表形式显示符合条件的商品销售记录

刺激：财务人员或总经理选择商品并查看详细商品销售记录

响应：系统显示该销售记录的详细信息

刺激：财务人员或总经理选择所需信息并选择导出

响应：系统导出信息为报表


#### 3.2.19.3 相关功能需求

| CheckSaleDetailReport.Input                                 | 在财务人员或总经理选择查看销售明细表时，系统显示筛选条件                                                          |
|---|
| CheckSaleDetailReport.Input|系统允许财务人员或总经理查看销售明细表时进行键盘输入|
| CheckSaleDetailReport.Input.Cancel|系统允许财务人员或总经理在输入筛选条件时选择取消,参见CheckSaleDetailReport.Cancel|
| CheckSaleDetailReport.Input.Sort|系统允许财务人员或总经理输入筛选条件，参见CheckSaleDetailReport.Sort|
| CheckSaleDetailReport.Input.detail| 系统允许财务人员或总经理查看销售记录的详细信息,参见CheckSaleDetailReport.detai|
| CheckSaleDetailReport.Input.OutputReport| 系统允许财务人员或总经理选择导出报表，参见CheckSaleDetailReport.OutputReport|
| CheckSaleDetailReport.Cancel|财务人员或总经理在输入筛选条件是选择取消，系统关闭查看销售明细表窗口|
| CheckSaleDetailReport.Sort|财务人员或总经理输入筛选条件，系统查询符合条件的记录并以列表显示|
| CheckSaleDetailReport.detail| 在财务人员或总经理选择商品并选择查看详细销售记录后，系统显示销售记录的详细信息|
| CheckSaleDetailReport.OutputReport| 在财务人员或总经理选择所需信息并选择导出时，系统到处所选信息为报表|
#### 3.2.20 查看经营历程表

#### 3.2.20.1 特性描述

查看一段时间内的所有单据。

优先级=低

#### 3.2.20.2 刺激/响应序列

刺激：财务人员或总经理选择查看经营历程表

响应：系统显示筛选条件

刺激：财务人员或总经理输入筛选条件

响应：系统以列表形式显示符合条件的单据

刺激：财务人员或总经理选择所需信息并选择导出

响应：系统导出信息为报表

刺激：财务人员或总经理选择单据并选择查看详细信息

响应：系统显示单据详细界面

刺激：财务人员或总经理选定单据并新建单据

响应：系统新建一个与选定单据相同的单据

刺激：财务人员或总经理修改新单据信息

响应：系统显示修改信息后的单据

刺激：财务人员或总经理选择保存新单据

响应：系统保存新单据


#### 3.2.20.3 相关功能需求

| CheckProgressReport.Input | 在财务人员或总经理选择查看经营历程表时，系统显示筛选条件|
|---|
| CheckProgressReport.Input | 系统允许财务人员或总经理选择查看经营历程表时进行键盘输入|
| CheckProgressReport.Input.Revise| 系统允许财务人员对单据进行红冲或复制操作，参见CheckProgressReport.Revise|
| CheckProgressReport.Input.Sort| 系统允许财务人员或总经理查看经营历程表时输入筛选条件，参见CheckProgressReport.Sort|
| CheckProgressReport.Input.Detail| 系统允许财务人员或总经理查看经营历程表时查看单据详细信息，参见CheckProgressReport.Detail|
| CheckProgressReport.Input.OutputReport | 系统允许财务人员或总经理选择导出，参见报表CheckProgressReport.OutputReport|
| CheckProgressReport.Revise.Build| 在财务人员选定单据并新建单据时，系统新建一个与选定单据相同的单据 |
| CheckProgressReport.Revise.Change | 在财务人员修改新单据新信息后，系统显示修改信息后的单据|
| CheckProgressReport.Revise.Store | 在财务人员选择保存新单据时，系统保存新单据|
| CheckProgressReport.Sort| 在财务人员或总经理输入筛选条件后，系统一列表显示符合条件的单据|
| CheckProgressReport.Detail| 在财务人员或总经理选择单据并选择查看详细信息后，系统显示单据详细信息 |
| CheckProgressReport.OutputReport | 在财务人员或总经理选择所需信息并选择导出时，系统到处所选信息为报表|

#### 3.2.21 查看经营情况表

#### 3.2.21.1 特性描述

查看一段时间内的经营收支情况和利润。

优先级=低

#### 3.2.21.2 刺激/响应序列

刺激：财务人员或总经理输入时间区间

响应：系统显示该时间区间内的经营情况表

刺激：财务人员或总经理选择查看收入情况

响应：系统显示收入情况

刺激：财务人员或总经理选择查看支出情况

响应：系统显示支出情况

刺激：财务人员或总经理选择查看利润状况

响应：系统显示利润状况

刺激：财务人员或总经理选择所需信息并选择导出

响应：系统导出信息为报表

#### 3.2.21.3 相关功能需求

| CheckResultReport.InputTime                                 | 在财务人员或总经理输入时间区间时，系统显示该时间区间内的经营情况表                                                          |
|---|
| CheckResultReport.Input | 系统允许财务人员或总经理查看经营情况表时进行键盘输入|
| CheckResultReport.Input.Income | 系统允许财务人员或总经理选择查看收入情况，参见CheckResultReport.Income |
| CheckResultReport.Input.expand | 系统允许财务人员或总经理选择查看支出情况，参见CheckResultReport.expand |
| CheckResultReport.Input.Check| 系统允许财务人员或总经理选择查看利润状况后，参见CheckResultReport.Check|
| CheckResultReport.Input.OutputReport| 系统允许财务人员或总经理选择导出报表，参见CheckResultReport.OutputReport|
| CheckResultReport.Income | 在财务人员或总经理选择查看收入情况时，系统显示收入情况 |
| CheckResultReport.expand | 在财务人员或总经理选择查看支出情况后，系统显示支出情况 |
| CheckResultReport.Check| 在财务人员或总经理选择查看利润状况后，系统显示利润状况|
| CheckResultReport.OutputReport| 在财务人员或总经理选择所需信息并选择导出时，系统到处所选信息为报表|

#### 3.2.22 审批单据

#### 3.2.22.1 特性描述

审批单据。

优先级=中

#### 3.2.22.2 刺激/响应序列

刺激：总经理打开审批界面

响应：系统显示待审批单据界面

刺激：总经理选择某一单据并打开

响应：系统显示单据详细信息

刺激：总经理选择通过

响应：系统将单据状态改为审批通过状态

刺激：总经理选中多个待审批单据并选择通过

响应：系统将所有选定单据状态改为审批通过状态

刺激：总经理选择不通过

响应：系统显示编辑框并要求输入修改意见

刺激：总经理选择单据并确认返回修改

响应：系统返回单据并将单据状态改为草稿状态

刺激：在总经理在对话框中输入修改意见并发送给用户

响应：系统保存消息并发送给用户

刺激：总经理选择修改

响应：系统显示单据修改界面

刺激：总经理修改单据信息并确认

响应：系统保存修改后单据

刺激：单据信息中商品数量为小数或单价为负数

响应：系统提示错误并拒绝输入

#### 3.2.22.3 相关功能需求

| ReceiptRevise.Start                                 | 在总经理打开审批界面时，系统显示待审批单据界面                                                          |
|---|
| ReceiptRevise.Start| 在总经理打开审批界面时，系统显示待审批单据界面 |
|ReceiptRevise.Input.ReviseOne|在总经理选择单个审批后，系统进行单个单据审批操作,参见ReceiptRevise.ReviseOne|
| ReceiptRevise.Input.ReviseMany| 系统允许在总经理选中多个单据并选择通过时 |
| ReceiptRevise.Input.Change | 在总经理选择修改后，系统进行一系列单据修改操作，参见ReceiptRevise.Change|
| ReceiptRevise.ReviseOne.Choose | 在总经理选择某一单据后，系统显示单据详细信息|
| ReceiptRevise.ReviseOne.Pass | 在总经理选择通过时，系统将单据状态改为通过审批状态|
| ReceiptRevise.ReviseOne.NotPass| 在总经理选择返回修改时，系统将单据返回给发送单据的用户且为草稿|
| ReceiptRevise.ReviseOne.Suggestion| 在总经理在对话框中输入修改意见并确认后，系统保存修改意见并发送给用户|
| ReceiptRevise.ReviseMany| 在总经理选中多个单据并选择通过时，系统将所有选定单据状态改为通过审批状态 |
| ReceiptRevise.Change.Start| 在总经理选择修改后，系统显示修改界面|
| ReceiptRevise.Change.Input | 在总经理修改单据信息并确认后，系统保存修改后单据 |
| ReceiptRevise.Change.InvalidInput | 在单据信息中商品数量为小数或单价为负数时，系统提示错误并拒绝输入|

#### 3.2.23 库存单据制定
#### 3.2.22.1 特性描述
制定库存报溢单以及库存报损单

优先级=高

#### 3.2.22.2 刺激/响应序列
刺激：库存管理人员打开制定库存报溢单界面

响应：系统显示商品选择界面

刺激：库存管理人员选择报溢的商品

刺激：库存管理人员输入商品数量并确认生成库存报溢单

响应：系统生成库存报溢单

刺激：库存管理人员打开制定库存报损单界面

响应：系统显示商品选择界面

刺激：库存管理人员选择报损的商品

响应：系统显示商品选择界面

刺激：库存管理人员输入商品数量并确认生成库存报损单

响应：系统生成库存报损单

#### 3.2.22.3 相关功能需求

| StockReceipt.Start|在库存管理人员打开创建单据界面时，系统显示创建单据界面|
|---|
|StockReceipt.Input|系统允许库存管理人员创建库存报溢单或报损单时进行键盘输入|
| StockReceipt.Input.Choose| 系统允许库存管理人员在创建单据时选择商品 |
| StockReceipt.Input.Submit| 在库存管理人员选择确定后，系统创建并保存单据等待审批等操作|
### 3.3 其他非功能需求
--------------

### 3.3.1 安全性

>   Safety1：系统应该只允许经过验证和授权的用户访问；

>   Safety2：系统应该按照用户身份给予验证用户的访问权限：

>   Safety3：系统中有一个默认的管理员账号，该账户只允许管理员用户修改口令。

>   Safety4: 除了期初建账外，银行账户余额不允许手动修改，只能够由系统根据单据自动修改

>   Safety5: 系统的主要操作要有日志记录，不允许删除

### 3.3.2 可维护性

>   Modifiability1：在商品编号格式需要改变时，要能够在0.5个人月内完成。

>   Modifiability2：在需要增加新的销售策略时，要能够在0.25个人月内完成。

### 3.3.3 易用性

Usability1：账单信息显示要在1米之外能看清。

Usability2：操作熟练的用户可以在3分钟之内创建好一个单据。

Usability3：系统允许经理批量审批单据。

Usability4：系统支持信息不完整时进行模糊查询。

### 3.3.4 可靠性

1. Reliability1：在客户端与服务器通信时，如果网络故障，系统不能出现故障。  
  + Reliability1.1：客户端应该检测到故障，并尝试重新连接网络3次，每次15秒；  
    + Reliability1.1.1：重新连接后，客户端应该继续之前的工作；  
    + Reliability1.1.2：如果重新连接不成功，客户端应该等待5分钟后再次尝试重新连接  
      - Reliability1.1.2.1：重新连接后，客户端应该继续之前的工作；  
      - Reliability1.1.2.2：如果重新连接仍然不成功，客户端报警；  


2. Reliability2：账目处理应当精确且同步
  + Reliability2.1：商品价格、销售额、账户余额等应当精确到小数点后两位
  + Reliability2.2：在计算商品剩余库存、账户余额时应保持与单据审批通过同步
    - Reliability2.2.1：在批量审批时若出现两个扣除同一种商品库存的单据，且扣除后库存小于零，则创建时间靠后的单据提示审批失败。
    - Reliability2.2.2：在批量审批时若出现多个扣除余额的单据，且导致扣除后余额小于0，则创建时间靠后的导致余额小于0的单据审批失败。  


3. Reliability3：应满足多个客户端同时工作的稳定性
  + Reliability3.1：保证服务器能够多线程工作
  + Reliability3.2：保证多个客户端同时工作时数据变化不会冲突
    - Reliability3.2.1：在一个库存管理人员同时进行分类管理、商品管理等操作时，另一个库存管理人员账户被暂时阻止进行分类管理、商品管理。
    - Reliability3.2.2：财务人员对账户的操作同3.2.1
    - Reliability3.2.3:总经理的审批操作同3.2.1

### 3.3.5 业务规则

+ BR1：适用（用户级别，赠品）的商品赠送促销策略  
根据用户等级决定该用户下订单时最高可赠送的商品  
+ BR2：适用（用户等级，代金券）的代金券赠送促销策略  
根据用户等级以及单笔订单金额决定赠送代金券面额  
+ BR3：适用（用户等级，价格折让）的商品特价促销策略  
根据用户等级以及当前季度用户已消费总额决定价格折让力度，折让方式为订单金额*折扣率
+ BR4：适用（总价，赠品）的商品赠送促销策略  
根据用户单笔订单的金额决定最高可赠送的商品  
+ BR5：适用（总价，代金券）的代金券赠送促销策略  
根据用户单笔订单的金额决定赠送代金券的面额  
+ BR6：适用（特价包）的商品特价促销策略  
根据选定的商品总额决定这些商品捆绑出售的价格  
+ BR7：退货日期约定  
今天-销售日期\>=15天  
+ BR8：退货时连同赠品（代金券）一同退回，相应库存增加  
+ BR9：一个商品赠送策略存在重复的判定规则  
S1为指定的商品赠送策略  
S2为其他的商品赠送策略  
如果存在满足下列条件的S2，则指定商品赠送策略存在重复：  
(S1.用户等级=S2.用户等级 并且 S1.赠品标识=S2.赠品标识) 并且  
((S1.开始日期早于等于S2的结束日期 并且 S1.开始日期晚于等于S2的开始日期) 或者  
（S2.开始日期早于等于S1的结束日期 并且 S2.开始日期晚于等于S1的开始日期））  
+ BR10：一个代金券赠送策略存在重复的判定规则  
S1为指定的总额特价策略  
S2为其他的总额特价策略  
如果存在满足下列条件的S2，则指定代金券赠送策略存在重复：  
(\|S1.额度-S2.额度\|\<30) 并且（S1.代金券金额=S2.代金券金额）  
((S1.开始日期早于等于S2的结束日期 并且 S1.开始日期晚于等于S2的开始日期) 或者  
（S2.开始日期早于等于S1的结束日期 并且 S2.开始日期晚于等于S1的开始日期））    
+ BR11：一个商品特价促销策略存在重复的判定规则  
S1为指定的商品赠送策略  
S2为其他的商品赠送策略  
如果存在满足下列条件的S2，则指定商品特价促销策略存在重复：  
(S1.用户等级=S2.用户等级） 并且 （|S1.折让力度-S2.折让力度|<=5%) 并且  
((S1.开始日期早于等于S2的结束日期 并且 S1.开始日期晚于等于S2的开始日期) 或者  
（S2.开始日期早于等于S1的结束日期 并且 S2.开始日期晚于等于S1的开始日期））  
+ BR12：一个商品特价策略存在重复的判定规则  
S1为指定的商品特价策略  
S2为其他的商品特价策略  
如果存在满足下列条件的S2，则指定商品特价策略存在重复：  
(S1.促销商品标识=S2.促销商品标识) 并且  
((S1.开始日期早于等于S2的结束日期 并且 S1.开始日期晚于等于S2的开始日期) 或者  
（S2.开始日期早于等于S1的结束日期 并且 S2.开始日期晚于等于S1的开始日期））  
+ BR13：一个总额赠送策略存在重复的判定规则  
S1为指定的总额赠送策略  
S2为其他的总额赠送策略  
如果存在满足下列条件的S2，则指定总额赠送策略存在重复：  
(\|S1.额度-S2.额度\|\<50 并且 S1.赠品标识=S2.赠品标识) 并且  
((S1.开始日期早于等于S2的结束日期 并且 S1.开始日期晚于等于S2的开始日期) 或者  
（S2.开始日期早于等于S1的结束日期 并且 S2.开始日期晚于等于S1的开始日期））  
+ BR14：一个代金券赠送策略存在重复的判定规则  
S1为指定的总额特价策略  
S2为其他的总额特价策略  
如果存在满足下列条件的S2，则指定代金券赠送策略存在重复：  
(\|S1.额度-S2.额度\|\<30) 并且（S1.代金券金额=S2.代金券金额）  
((S1.开始日期早于等于S2的结束日期 并且 S1.开始日期晚于等于S2的开始日期) 或者  
（S2.开始日期早于等于S1的结束日期 并且 S2.开始日期晚于等于S1的开始日期））  
+ BR15：剩余库存量=当前库存量-订单出货量  
+ BR16：商品最近售价=单价*折让率-代金券金额/数量  
+ BR17：订单金额=单价\*数量\*折让率-代金券金额  
+ BR18：匹配促销策略时的价格换算  
订单总额为单价\*数量\*折让率-赠品价格或单价*数量-优惠券面额-赠品价格  
赠送商品和折让或优惠券可以同时应用，但使用优惠券时不能打折  

### 3.3.6 约束

>   IC1：系统要使用Java语言进行开发

>   IC2：系统要在网络上分布为一个服务器和多个客户端（使用rmi架构）（用户远程使用系统）

>   IC3：图形化界面进行操作

3.4 数据需求
------------

### 3.4.1 数据定义

>   DR1：系统需要存储的数据实体及其关系参见附图1。

>   DR2：系统需要存储1年内的销售记录、退货记录、进货记录、进货退货记录。

>   DR3：系统删除之后的商品数据和用户数据仍然要继续存储3个月的时间，以保证历史数据显示的正确性。

>   DR4：系统主要操作都有日志进行记录，并对经理和财务人员提供查询功能。

### 3.4.2 默认数据

默认数据用于

-   系统中新增加数据时

-   编辑数据时不小心将相关内容清空

Default1：商品的数量默认为1

Default2：商品单价的数据默认为商品信息中的进价

Default3：积分数据默认为0

Default4：管理员的默认账号为admin，默认密码为admin

Default5：时间默认为当天

Default6：业务员默认为当前登录管理员

Default8：新增商品分类或商品名默认为空

Default9：单据备注默认为空

Default10：折让和代金券金额默认为0

Default11：转账金额默认为0

Default12：客户姓名默认为空

Default13：客户电话、地址、邮编、电子邮箱默认为空

### 3.4.3 数据格式要求

>   Format1：进货单单据编号格式必须是：JHD-yyyyMMdd-xxxxx；

>   Format2：进货退货单单据号必须命名为：JHTHD-······；

>   Format3：销售退货单单据号必须命名为：XSTHD-······；

>   Format4：销售单单据编号必须是：XSD-yyyyMMdd-xxxxx；

>   Format5：付款单单据编号格式必须是：XJFYD-yyyyMMdd-xxxxx；

>   Format6：价格、费用和减免金额的格式必须是：大于等于0、精确到小数点后2位的为浮点数，单位为RMB元；

>   Format7：日期的格式必须是：yyyy-mm-dd；

>   Format8：数量的格式必须是：正整数。

>   Format9：销售员最多折让1000元，销售经理可以折让5000元，总经理可以任意金额的折让。

3.5 其他需求
------------

安装需求

>   Install1：在安装系统时，要初始化用户、商品库存等重要数据。

>   Install2：系统投入使用时，需要对用户进行1个星期的集中培训。

开发需求

>   Develop1：采用Java语言开发。

>   Develop2：用户远程使用系统。

>   Develop3：图形化界面进行操作。




附录
----

各种分析模型略。
